<script type='text/javascript'>
  RED.nodes.registerType('git-flows', {
      category: 'advanced',
      color: '#AAAAAA',
      defaults: {
        label: { value: '' },
        username: { value: '' },
        email: { value: '' },
        git: { value: '' },
        gitadd: { value: 'settings.js,package.json' },
        gitrmcache: { value: 'nodes/*/x,nodes/*/y,nodes/*/z' },
        includeCredential: { value: false},
        debugging: { value: true}
      },
      inputs: 0,
      outputs: 0,
      icon: 'icon.png',
      label: function () {
          return this.name || "git flows";
      },
      button: {
        onclick: function() {
          //alert("")
          var commitMessage = prompt("Input commit message")
          //alert(commitMessage)
          var node = this;
          $.ajax({
            url: "git-flows/"+this.id,
            data: { commitMessage: commitMessage },
            type:"post",
            success: function(resp) {
              RED.notify(node._("git command success",{label:"git"}),"success");
            },
            error: function(jqXHR,textStatus,errorThrown) {
              RED.notify(node._("git command error",{label:"git"}),"error");
            }
        });
      }
    }
  });
</script>
<script type='text/x-red' data-template-name='git-flows'>
  <div class='form-row'>
    <label for='node-input-label' style='width:150px;'><i class='fa fa-tag'></i> Name</label>
    <input type='text' id='node-input-label' placeholder='' style='width:60%;'>
  </div>
  <div class='form-row'>
    <label for='node-input-username' style='width:150px;'><i class='fa fa-user'></i> git config user.name</label>
    <input type='text' id='node-input-username' placeholder='' style='width:60%;'>
  </div>
  <div class="form-row">
    <label for="node-input-email" style='width:150px;'><i class="fa fa-envelope"></i> git config user.email</label>
    <input type="text" id="node-input-email" placeholder='foobar@example.com' style='width:60%;'>
  </div>
  <div class="form-row">
    <label style='width:150px;'><i class="fa fa-plus-square"></i> Include credential</label>
    <input type="checkbox" id="node-input-includeCredential" style="display: inline-block; width: auto; vertical-align: top;">
    <label for="node-input-includeCredential" style="width: 60%;"> (ex: git add flows_cred.json)</label>
  </div>
  <div class="form-row">
    <label for="node-input-gitadd" style='width:150px;'><i class="fa fa-plus"></i> git add</label>
    <input type="text" id="node-input-gitadd" placeholder='settings.js,package.json' style='width:60%;'>
  </div>
  <div class="form-row">
    <label for="node-input-gitrmcache" style='width:150px;'><i class="fa fa-minus"></i> .git rm</label>
    <input type="text" id="node-input-gitrmcache" placeholder='nodes/*/x,nodes/*/y,nodes/*/z' style='width:60%;'>
  </div>
  <div class="form-row">
    <label style='width:150px;'><i class="fa fa-sign-in"></i> Output to debugging</label>
    <input type="checkbox" id="node-input-debugging" style="display: inline-block; width: auto; vertical-align: top;">
    <label for="node-input-debugging" style="width: 60%;"> &nbsp;</label>
  </div>
  <hr />
  <div class="form-row">
    <label for="node-input-git" style='width:150px;'><i class="fa fa-code-fork"></i> git repository (ssh)</label>
    <input type="text" id="node-input-git" placeholder='git@github.com:{user-name}/{repository-name}.git' style='width:60%;'>
  </div>
</script>
<script type='text/x-red' data-help-name='git-flows'>
  <dl>
      <dt></dt>
      <dd></dd>
  </dl>
</script>